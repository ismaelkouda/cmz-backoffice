<div class="container-fluid add-cs">
    <div class="row">
        <div class="col-12">
            <app-breadcrumb
                [title]="module | translate"
                [active_item]="subModule | translate"
            >
            </app-breadcrumb>

            <div class="card premium-card mt-3">
                <div class="card-body">
                    <div
                        class="page-head d-flex flex-wrap justify-content-between align-items-start mb-3"
                    >
                        <div class="title-block">
                            <h3 class="mb-1 fw-bold">
                                {{
                                    'IMAKO_SERVICE_REQUEST_GATEWAY' | translate
                                }}
                            </h3>
                            <!-- <small class="text-muted">{{ 'FILL_ALL_REQUIRED_FIELDS' | translate }}</small> -->
                        </div>
                        <div class="d-flex gap-2">
                            <button
                                pButton
                                type="button"
                                class="p-button-success"
                                (click)="handleSave()"
                                [class.p-disabled]="
                                    customersActivateForm.invalid
                                "
                                [label]="'SAVE' | translate"
                                icon="pi pi-save"
                            ></button>
                            <button
                                pButton
                                type="button"
                                class="p-button-danger"
                                (click)="onBack()"
                                [label]="'QUEUE' | translate"
                                icon="pi pi-times"
                            ></button>
                        </div>
                    </div>

                    <form
                        [formGroup]="customersActivateForm"
                        class="premium-form row g-3"
                    >
                        <!-- CLIENT CATEGORY -->
                        <fieldset class="fieldset-premium treatment-fieldset">
                            <legend class="approval-legend mb-3">
                                <i class="bi bi-people-fill me-2"></i>
                                <strong>{{
                                    'SELECT_CUSTOMER_CATEGORY' | translate
                                }}</strong>
                            </legend>

                            <div class="card mb-0 shadow-sm p-3 approval-card">
                                <div class="row g-3 align-items-center">
                                    <div class="col-md-12">
                                        <div
                                            class="form-check d-flex justify-content-around gap-3"
                                        >
                                            <div
                                                class="big-radio d-flex flex-row gap-3 align-items-center"
                                                (click)="
                                                    setRadioValue('Private')
                                                "
                                            >
                                                <input
                                                    class="form-check-input"
                                                    type="radio"
                                                    id="Private"
                                                    value="Private"
                                                    formControlName="type_entreprise"
                                                    [ngClass]="{
                                                        'is-invalid':
                                                            isInvalid(
                                                                'type_entreprise'
                                                            ),
                                                    }"
                                                />
                                                <label
                                                    class="form-check-label fw-semibold mt-2"
                                                    for="Private"
                                                >
                                                    {{
                                                        'PRIVATE_ENTERPRISE'
                                                            | translate
                                                    }}
                                                </label>
                                            </div>

                                            <div
                                                class="big-radio d-flex flex-row gap-3 align-items-center"
                                                (click)="
                                                    setRadioValue('Publique')
                                                "
                                            >
                                                <input
                                                    class="form-check-input"
                                                    type="radio"
                                                    id="Publique"
                                                    value="Publique"
                                                    formControlName="type_entreprise"
                                                    [ngClass]="{
                                                        'is-invalid':
                                                            isInvalid(
                                                                'type_entreprise'
                                                            ),
                                                    }"
                                                />
                                                <label
                                                    class="form-check-label fw-semibold mt-2"
                                                    for="Publique"
                                                >
                                                    {{
                                                        'PUBLIC_ENTERPRISE'
                                                            | translate
                                                    }}
                                                </label>
                                            </div>

                                            <div
                                                class="big-radio d-flex flex-row gap-3 align-items-center"
                                                (click)="
                                                    setRadioValue('Association')
                                                "
                                            >
                                                <input
                                                    class="form-check-input"
                                                    type="radio"
                                                    id="Association"
                                                    value="Association"
                                                    formControlName="type_entreprise"
                                                    [ngClass]="{
                                                        'is-invalid':
                                                            isInvalid(
                                                                'type_entreprise'
                                                            ),
                                                    }"
                                                />
                                                <label
                                                    class="form-check-label fw-semibold mt-2"
                                                    for="Association"
                                                >
                                                    {{
                                                        'Association'
                                                            | translate
                                                    }}
                                                </label>
                                            </div>

                                            <!-- <div
                                                class="big-radio d-flex flex-row gap-3 align-items-center"
                                                (click)="
                                                    setRadioValue(
                                                        'Personne physique'
                                                    )
                                                "
                                            >
                                                <input
                                                    class="form-check-input"
                                                    type="radio"
                                                    id="Personne physique"
                                                    value="Personne physique"
                                                    formControlName="type_entreprise"
                                                    [ngClass]="{
                                                        'is-invalid':
                                                            isInvalid(
                                                                'type_entreprise'
                                                            )
                                                    }"
                                                />
                                                <label
                                                    class="form-check-label fw-semibold mt-2"
                                                    for="Personne physique"
                                                >
                                                    {{
                                                        'Personne physique'
                                                            | translate
                                                    }}
                                                </label>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- CLIENT INFOS -->
                        <fieldset class="fieldset-premium">
                            <legend>
                                <b>{{ 'CLIENT_INFORMATION' | translate }}</b>
                            </legend>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'COMMERCIAL_NAME' | translate
                                        }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="commercial_name"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('nom_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'CLIENT_ABREVIATION' | translate
                                        }}</b>
                                    </label>
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="abbreviation_cn"
                                        [ngClass]="{
                                            'is-invalid': isInvalid('adresse'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'CUSTOMER_ACCOUNT' | translate
                                        }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="compte_client"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('compte_client'),
                                        }"
                                    />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'ACTIVITY_DOMAIN' | translate
                                        }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="domaine_activite"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('domaine_activite'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'TELEPHONE' | translate
                                        }}</b></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="client_phone"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('compte_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'EMAIL' | translate }}</b></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="client_email"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('compte_client'),
                                        }"
                                    />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'ADDRESS' | translate
                                        }}</b></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="client_address"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('compte_client'),
                                        }"
                                    />
                                </div>
                                <div
                                    class="col-md-4 animate-fadeIn animate-fadeOut"
                                >
                                    <label class="form-label"
                                        ><b>{{
                                            'LOGO_ENTERPRISE' | translate
                                        }}</b></label
                                    >
                                    <div
                                        class="d-flex justify-content-between align-items-center gap-2"
                                    >
                                        <div class="flex-grow-1">
                                            <input
                                                class="form-control file-input"
                                                type="file"
                                                (change)="
                                                    onChangeFile(
                                                        $event.target.files,
                                                        'logo_client'
                                                    )
                                                "
                                                accept="image/png,image/jpeg"
                                            />
                                        </div>
                                        <button
                                            pButton
                                            type="button"
                                            class="p-button-secondary"
                                            icon="pi pi-eye"
                                            [label]="'VIEW' | translate"
                                            (click)="viewFile('logo_client')"
                                            [disabled]="
                                                !customersActivateForm.value
                                                    .logo_client
                                            "
                                        ></button>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- MANAGER INFOS / PHONE -->
                        <fieldset class="fieldset-premium">
                            <legend>
                                <b>{{ 'MANAGER_INFORMATION2' | translate }}</b>
                            </legend>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'LAST_NAME' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="nom_client"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('nom_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'FIRST_NAME' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="nom_client"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('nom_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'TELEPHONE' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="client_phone"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('compte_client'),
                                        }"
                                    />
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'EMAIL' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="email"
                                        formControlName="email_admin_client"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('email_admin_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'IDENTITY_DOCUMENT' | translate
                                        }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <div
                                        class="d-flex justify-content-between align-items-center gap-2"
                                    >
                                        <div class="flex-grow-1">
                                            <input
                                                class="form-control file-input"
                                                type="file"
                                                (change)="
                                                    onChangeFile(
                                                        $event.target.files,
                                                        'piece_gerant'
                                                    )
                                                "
                                                accept="image/png,image/jpeg"
                                            />
                                        </div>
                                        <button
                                            pButton
                                            type="button"
                                            class="p-button-secondary"
                                            icon="pi pi-eye"
                                            [label]="'VIEW' | translate"
                                            (click)="viewFile('piece_gerant')"
                                            [disabled]="
                                                !customersActivateForm.value
                                                    .piece_gerant
                                            "
                                        ></button>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- MANAGER INFOS -->
                        <fieldset class="fieldset-premium">
                            <legend>
                                <b>{{
                                    'ADMIN_PHONE_INFORMATION' | translate
                                }}</b>
                            </legend>

                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'LAST_NAME' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="nom_client"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('nom_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'FIRST_NAME' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="nom_client"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('nom_client'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{ 'TELEPHONE' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="client_phone"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('compte_client'),
                                        }"
                                    />
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label"
                                        ><b>{{ 'EMAIL' | translate }}</b
                                        ><span class="text-danger"
                                            >*</span
                                        ></label
                                    >
                                    <input
                                        pInputText
                                        type="email"
                                        formControlName="email_gerant"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('email_gerant'),
                                        }"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'IDENTITY_DOCUMENT' | translate
                                        }}</b></label
                                    >
                                    <div
                                        class="d-flex justify-content-between align-items-center gap-2"
                                    >
                                        <div class="flex-grow-1">
                                            <input
                                                class="form-control file-input"
                                                type="file"
                                                (change)="
                                                    onChangeFile(
                                                        $event.target.files,
                                                        'piece_gerant'
                                                    )
                                                "
                                                accept="image/png,image/jpeg"
                                            />
                                        </div>
                                        <button
                                            pButton
                                            type="button"
                                            class="p-button-secondary"
                                            icon="pi pi-eye"
                                            [label]="'VIEW' | translate"
                                            (click)="viewFile('piece_gerant')"
                                            [disabled]="
                                                !customersActivateForm.value
                                                    .piece_gerant
                                            "
                                        ></button>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- MORAL DECLARATION -->
                        <fieldset class="fieldset-premium">
                            <legend>
                                <b>{{ 'MORAL_DECLARATION' | translate }}</b>
                            </legend>
                            <div class="row">
                                <div class="col-md-5">
                                    <label class="form-label"
                                        ><b>RCCM</b></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="numero_rccm"
                                    />
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label"
                                        ><b>{{
                                            'LEGAL_FORM' | translate
                                        }}</b></label
                                    >
                                    <p-select
                                        [options]="listLegalForm$ | async"
                                        optionLabel="nom"
                                        optionValue="code"
                                        placeholder="{{ 'SELECT' | translate }}"
                                        [filter]="true"
                                        filterBy="nom"
                                        formControlName="forme_juridique_code"
                                    ></p-select>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>RCCM</b></label
                                    >
                                    <div
                                        class="d-flex justify-content-between align-items-center gap-2"
                                    >
                                        <div class="flex-grow-1">
                                            <input
                                                class="form-control file-input"
                                                type="file"
                                                (change)="
                                                    onChangeFile(
                                                        $event.target.files,
                                                        'fichier_rccm'
                                                    )
                                                "
                                                accept="image/png,image/jpeg"
                                            />
                                        </div>
                                        <button
                                            pButton
                                            type="button"
                                            class="p-button-secondary"
                                            icon="pi pi-eye"
                                            [label]="'VIEW' | translate"
                                            (click)="viewFile('fichier_rccm')"
                                            [disabled]="
                                                !customersActivateForm.value
                                                    .fichier_rccm
                                            "
                                        ></button>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- FISCAL DECLARATION -->
                        <fieldset class="fieldset-premium">
                            <legend>
                                <b>{{ 'FISCAL_DECLARATION' | translate }}</b>
                            </legend>
                            <div class="row">
                                <div class="col-md-4">
                                    <label class="form-label"
                                        ><b>{{
                                            'NUMBER_CC' | translate
                                        }}</b></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="numero_cc"
                                    />
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label"
                                        ><b>{{
                                            'REGIME' | translate
                                        }}</b></label
                                    >
                                    <p-select
                                        [options]="listRegimesBusiness$ | async"
                                        optionLabel="nom"
                                        optionValue="code"
                                        placeholder="{{ 'SELECT' | translate }}"
                                        formControlName="regime_code"
                                        [filter]="true"
                                        filterBy="nom"
                                    >
                                    </p-select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label"
                                        ><b>{{
                                            'CENTER' | translate
                                        }}</b></label
                                    >
                                    <input
                                        pInputText
                                        type="text"
                                        formControlName="centre"
                                    />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label"><b>DFE</b></label>
                                    <div
                                        class="d-flex justify-content-between align-items-center gap-2"
                                    >
                                        <div class="flex-grow-1">
                                            <input
                                                class="form-control file-input"
                                                type="file"
                                                (change)="
                                                    onChangeFile(
                                                        $event.target.files,
                                                        'fichier_dfe'
                                                    )
                                                "
                                                accept="image/png,image/jpeg"
                                            />
                                        </div>
                                        <button
                                            pButton
                                            type="button"
                                            class="p-button-secondary"
                                            icon="pi pi-eye"
                                            [label]="'VIEW' | translate"
                                            (click)="viewFile('fichier_dfe')"
                                            [disabled]="
                                                !customersActivateForm.value
                                                    .fichier_dfe
                                            "
                                        ></button>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- REQUEST DESCRIPTION -->
                        <fieldset class="fieldset-premium">
                            <legend>
                                <b>{{ 'REQUEST_DESCRIPTION' | translate }}</b>
                            </legend>
                            <div class="row">
                                <div class="col-12">
                                    <input
                                        type="text"
                                        pInputText
                                        formControlName="description"
                                        [ngClass]="{
                                            'is-invalid':
                                                isInvalid('description'),
                                        }"
                                        placeholder="{{
                                            'COMMENT' | translate
                                        }}..."
                                    />
                                </div>
                            </div>
                        </fieldset>

                        <!-- SAVE BUTTON -->
                        <div class="forms-feature-footer">
                            <button
                                pButton
                                type="button"
                                class="p-button-success"
                                (click)="handleSave()"
                                [class.p-disabled]="
                                    customersActivateForm.invalid
                                "
                                [label]="'SAVE' | translate"
                                icon="pi pi-save"
                            ></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
