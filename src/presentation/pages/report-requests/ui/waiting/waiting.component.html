<main class="container-fluid waiting-container" role="main">
    <section class="row waiting-row">
        <article class="col-sm-12 waiting-article">
            <app-breadcrumb
                class="waiting-breadcrumb"
                [title]="module | translate"
                [active_item]="subModule | translate"
            ></app-breadcrumb>

            <section class="card waiting-card">
                <div class="card-body waiting-card-body">
                    <header class="waiting-header">
                        <app-page-title
                            class="page-title-component"
                            [displayDate]="false"
                            [title]="
                                'REPORT_REQUESTS.WAITING.TITLE' | translate | lowercase
                            "
                        >
                        </app-page-title>
                    </header>

                    <div class="fade-in waiting-content">
                        <app-filter-waiting
                            class="filter-component"
                            (filter)="filter($event)"
                        >
                        </app-filter-waiting>

                        <hr class="waiting-divider" />

                        <section
                            class="table-section"
                            aria-label="Tableau des files d'attente"
                        >
                            <app-table-waiting
                                class="table-component"
                                [isLoading]="isLoading$ | async"
                                [pagination$]="pagination$"
                                [listWaiting$]="listWaiting$"
                                (treatmentRequested)="
                                    onWaitingAction($event)
                                "
                                (refreshRequested)="refreshWaiting()"
                            >
                            </app-table-waiting>

                            <app-pagination
                                class="pagination-component"
                                [pagination]="pagination$ | async"
                                (pageChange)="onPageChange($event)"
                            ></app-pagination>
                        </section>
                    </div>
                </div>
            </section>
        </article>
    </section>

    @if(reportTreatmentVisible) {
            <app-management
            [(visible)]="reportTreatmentVisible"
            [reportId]="selectedReportId"
            [title]="'prise-en-charge'"
            [managementParams]="selectManagementParams"
            (closed)="onReportTreatmentClosed()"
        ></app-management>
    }
</main>