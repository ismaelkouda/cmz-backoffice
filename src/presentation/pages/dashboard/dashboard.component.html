<div class="dashboard-container">
    <div class="dashboard-header">
        <!-- <div class="header-left">
            
        </div> -->
        <div class="title-section">
            <h1 class="dashboard-title">
                {{ 'DASHBOARD.TITLE' | translate }}
            </h1>
        </div>

        <div class="period-filter-container">
            <label class="period-filter">
                <span class="period-filter-label">
                    <i class="pi pi-calendar"></i>
                    {{ 'DASHBOARD.FILTER.PERIOD_LABEL' | translate }}
                </span>
                <span class="period-filter-value">
                    {{ 'DASHBOARD.FILTER.PERIOD_INDICATOR' | translate }}:
                </span>
            </label>

            <p-selectButton
                [options]="periodOptions"
                [(ngModel)]="selectedPeriod"
                (onChange)="onPeriodChange($event.value)"
                [disabled]="isLoading$ | async"
                optionLabel="label"
                optionValue="value"
                styleClass="period-select-button"
            ></p-selectButton>
        </div>

        <div class="header-actions">
            <div class="date-info">
                {{ 'DASHBOARD.UPDATED_DATE' | translate }}:
                {{ (items$ | async)?.lastRefreshAt || ('DASHBOARD.NO_DATE' | translate) }}
            </div>
            <button
                class="refresh-btn"
                (click)="refreshData()"
                [disabled]="isLoading$ | async"
                type="button"
                [attr.aria-label]="'DASHBOARD.REFRESH' | translate"
            >
                <i
                    class="pi pi-refresh"
                    [class.pi-spin]="isLoading$ | async"
                ></i>
            </button>
        </div>
    </div>

    <div *ngIf="error" class="error-message">
        <i class="pi pi-exclamation-triangle"></i>
        <span>{{ error }}</span>
    </div>

    <div *ngIf="isLoading$ | async" class="loading-container">
        <p-progressSpinner></p-progressSpinner>
        <p>{{ 'DASHBOARD.LOADING' | translate }}</p>
    </div>

    <div
        *ngIf="!(isLoading$ | async) && !error && typeStatistics.length === 0"
        class="no-data-container"
    >
        <i class="pi pi-info-circle"></i>
        <p>{{ 'DASHBOARD.NO_DATA' | translate }}</p>
    </div>

    <div *ngIf="!(isLoading$ | async) && !error" class="dashboard-content">
        <div class="statistics-section" *ngIf="typeStatistics.length > 0">
            <div class="section-header">
                <div class="section-badge">
                    {{ 'DASHBOARD.SECTIONS.TYPE.TITLE' | translate }}
                </div>
                <div class="section-indicator"></div>
            </div>
            <div class="statistics-grid">
                <div
                    *ngFor="let stat of typeStatistics"
                    class="stat-card card-{{ stat.color }}"
                    [class.clickable]="stat.routerFilter"
                    (click)="navigateToReport(stat)"
                >
                    <div class="card-content">
                        <div class="stat-header">
                            <div class="stat-value">{{ stat.count }}</div>
                            <div class="stat-icon-wrapper">
                                <i class="stat-icon pi {{ stat.icon }}"></i>
                            </div>
                        </div>
                        <div class="stat-label">
                            {{ stat.label | translate }}
                        </div>
                        <!-- <div class="stat-subtitle">
                            {{ stat.subtitle | translate }}
                        </div> -->
                    </div>
                    <div class="card-decoration"></div>
                </div>
            </div>
        </div>

        <div class="statistics-section" *ngIf="taskStatusStatistics.length > 0">
            <div class="section-header">
                <div class="section-badge">
                    {{ 'DASHBOARD.SECTIONS.TASK_STATUS.TITLE' | translate }}
                </div>
                <div class="section-indicator"></div>
            </div>
            <div class="statistics-grid">
                <div
                    *ngFor="let stat of taskStatusStatistics"
                    class="stat-card card-{{ stat.color }}"
                    [class.clickable]="stat.routerFilter"
                    (click)="navigateToReport(stat)"
                >
                    <div class="card-content">
                        <div class="stat-header">
                            <div class="stat-value">{{ stat.count }}</div>
                            <div class="stat-icon-wrapper">
                                <i class="stat-icon pi {{ stat.icon }}"></i>
                            </div>
                        </div>
                        <div class="stat-label">
                            {{ stat.label | translate }}
                        </div>
                        <!-- <div class="stat-subtitle">
                            {{ stat.subtitle | translate }}
                        </div> -->
                    </div>
                    <div class="card-decoration"></div>
                </div>
            </div>
        </div>

        <!-- <div
            class="statistics-section"
            *ngIf="performanceStatistics.length > 0"
        >
            <div class="section-header">
                <div class="section-badge">
                    {{ 'DASHBOARD.SECTIONS.PERFORMANCE.TITLE' | translate }}
                </div>
                <div class="section-indicator"></div>
            </div>
            <div class="statistics-grid">
                <div
                    *ngFor="let stat of performanceStatistics"
                    class="stat-card card-{{ stat.color }}"
                    [class.clickable]="stat.routerFilter"
                    (click)="navigateToReport(stat)"
                >
                    <div class="card-content">
                        <div class="stat-header">
                            <div class="stat-value">{{ stat.count }}</div>
                            <div class="stat-icon-wrapper">
                                <i class="stat-icon pi {{ stat.icon }}"></i>
                            </div>
                        </div>
                        <div class="stat-label">
                            {{ stat.label | translate }}
                        </div>
                    </div>
                    <div class="card-decoration"></div>
                </div>
            </div>
        </div> -->
    </div>
</div>
