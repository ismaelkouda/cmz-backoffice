<div>
  <div class="row filter_wrapper">
    <div class="col-md-3">
      <div class="form-group">
        <label>
          <b>Direction Régionale</b>
        </label>
        <p-dropdown [options]="listDirectionRegionales" (onChange)="onChangeItem($event)"
          [(ngModel)]="selectedDirection" [showClear]="true" optionLabel="nom" placeholder="Selectionnez la direction">
          <ng-template let-data pTemplate="item">
            <div class="country-item">
              <div>
                {{data.nom}}
              </div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label>
          <b>Exploitation</b>
        </label>
        <p-dropdown [options]="listExploitations" [(ngModel)]="selectedExploitation" optionLabel="nom"
          placeholder="Selectionnez la l'exploitation">
          <ng-template let-data pTemplate="item">
            <div class="country-item">
              <div>
                {{data.nom}}
              </div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </div>
    <div class="col-md-2">
      <div class="form-group">
        <label>
          <b>MSISDN</b>
        </label>
        <input placeholder="Saisir le numéro" [(ngModel)]="selectedSim" pInputText />
      </div>
    </div>
    <div class="col-md-1">
      <p-button styleClass="p-button-success filter-button" icon="pi pi-filter" (click)="onFilter()"
        [disabled]="isFilter()"></p-button>
    </div>
  </div>
  <hr>
  <div class="table_actions_wrapper">
    <button pButton pRipple label="Raffraichir" (click)="onGetAllFluxCollecte()" icon="pi pi-refresh"
      class="p-button-secondary"></button>
    <button pButton pRipple label="Exporter" [disabled]="disableAction()" icon="pi pi-download"
      class="p-button-helf"></button>
  </div>
  <!--
  <div class="table_content_wrapper">
    <p-table #dt [value]="listFluxCollecte" [rows]="10" [paginator]="true" responsiveLayout="scroll" [rowHover]="true"
      dataKey="id" currentPageReportTemplate="Affichage de {first} à {last} des {totalRecords}
            données" [showCurrentPageReport]="true">
      <ng-template pTemplate="caption">
        <div class="table_header">
          <div class="table_header__legende">
            <h4>
              <b>Liste des {{this.title}}</b>
            </h4>
          </div>
          <div class="table_header__input">
            <span class="p-input-icon-left ml-auto">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt1.filterGlobal($event.target.value, 'contains')"
                placeholder="Recherche" />
            </span>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th class="text-center">#</th>
          <th>Identifiant SIM</th>
          <th>Numéro SIM</th>
          <th>Direction Régionale</th>
          <th>Exploitation</th>
          <th *ngIf="router.url === '/analyse-alerte/performance-de-collecte'">
            Position
          </th>
          <th class="text-center">Etat des Services</th>
          <th class="text-center">Actions</th>
        </tr>
      </ng-template>
      <ng-template let-i="rowIndex" pTemplate="body" let-data>
        <tr>
          <td class="text-center">{{ i + 1 }}</td>
          <td>{{data.nom_sim}}</td>
          <td class="text-center">{{data.msisdn}}</td>
          <td>{{data.direction_regionale}}</td>
          <td class="text-center">{{data.exploitation}}</td>
          <td *ngIf="router.url === '/analyse-alerte/performance-de-collecte'">

          </td>
          <td class="text-center">
            <button pButton pRipple label="AIRTIME" class="p-button-helf mx-2"></button>
            <button pButton pRipple label="DATA" class="p-button-helf mx-2"></button>
            <button pButton pRipple label="SMS" class="p-button-helf mx-2"></button>
          </td>
          <td class="td-actions">
            <button pButton pRipple label="Visualiser" (click)=onVisualiser(data) icon="pi pi-chart-line"
              class="p-button-helf"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  -->
  <div class="table_content_wrapper">
    <div class="table_header mt-2">
      <div class="table_header__legende">
        <h4 class="pt-2">
          <b>Liste des {{this.title}}</b>
        </h4>
      </div>
      <div class="table_header__input">
        <!-- <span class="p-input-icon-left ml-auto">
          <i class="pi pi-search"></i>
          <input pInputText type="text" placeholder="Recherche" />
        </span> -->
      </div>
    </div>
    <table [ngClass]="['native_table table']" style="margin-top: -0.2rem">
      <thead>
        <th class="text-center">#</th>
        <th>Identifiant</th>
        <th>MSISDN</th>
        <th>D.Régionale</th>
        <th>Exploitation</th>
        <th>Date MAJ</th>
        <th class="text-center">Etat des Services</th>
        <th class="text-center">Actions</th>
      </thead>
      <tbody>
        <tr
          *ngFor="let data of listFluxCollecte | paginate: { itemsPerPage: recordsPerPage, currentPage: p, totalPages:totalPage, totalItems:totalRecords }; let i = index;">
          <td>{{ (this.offset + i)}}</td>
          <td style="text-align: left !important;">{{data.nom_sim}}</td>
          <td style="text-align: left !important;">{{data.msisdn}}</td>
          <td style="text-align: left !important;">{{data.direction_regionale}}</td>
          <td style="text-align: left !important;">{{data.exploitation}}</td>
          <td style="text-align: left !important;">{{data?.date_id}}</td>
          <td style="text-align: center !important;">
            <button pButton pRipple label="AIRTIME" [disabled]="true" class="p-button-helf"></button>

            <button *ngIf="data?.statut_criticite === 'CRITIQUE'" pButton pRipple label="DATA" class="p-button-danger"
              [pTooltip]="data?.statut_criticite" tooltipPosition="top"></button>
            <button *ngIf="data?.statut_criticite === 'NORMALE'" pButton pRipple label="DATA" class="p-button-success"
              [pTooltip]="data?.statut_criticite" tooltipPosition="top"></button>
            <button *ngIf="data?.statut_criticite === 'ELEVE'" pButton pRipple label="DATA" class="p-button-warning"
              [pTooltip]="data?.statut_criticite" tooltipPosition="top"></button>


            <button pButton pRipple label="SMS" [disabled]="true" class="p-button-helf"></button>
          </td>
          <td class="td-actions">
            <button *ngIf="router.url === '/analyse-alerte/performance-de-collecte'" pButton pRipple label="Visualiser"
              (click)=onVisualiser(data) icon="pi pi-chart-line" class="p-button-helf"></button>
            <button *ngIf="router.url === '/analyse-alerte/courbes-messages'" pButton pRipple label="Visualiser"
              (click)=onVisualiserTwo(data) icon="pi pi-chart-line" class="p-button-helf"></button>
          </td>
        </tr>
      </tbody>
    </table>
    <div [ngClass]="['pagination-controls']">
      <pagination-controls (pageChange)="onPageChange($event)" previousLabel="" nextLabel="">
      </pagination-controls>
    </div>
  </div>
</div>
<p-dialog [header]="title" [(visible)]="showIframe" [modal]="true" [style]="{ width: '70vw' }" [maximizable]="true"
  [draggable]="false" [resizable]="false">
  <ng-template pTemplate="content">
    <div>
      <iframe class="iframe__constainer" [src]="visualUrl | safe">
      </iframe>
    </div>
  </ng-template>
</p-dialog>