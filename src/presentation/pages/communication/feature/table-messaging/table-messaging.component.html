<app-table-title
    [title]="'COMMUNICATION.MESSAGING.TABLE.TITLE' | translate"
></app-table-title>

<app-table-button-header
    [showRefresh]="true"
    [showExport]="false"
    [isLoading]="isLoading()"
    (refreshClicked)="onRefresh()"
></app-table-button-header>

<p-table
    [value]="messages()"
    [loading]="isLoading()"
    [rowHover]="true"
    styleClass="p-datatable-sm"
    responsiveLayout="scroll"
>
    <ng-template pTemplate="header">
        <tr>
            <th>{{ 'COMMUNICATION.MESSAGING.FIELDS.DATE' | translate }}</th>
            <th>
                {{ 'COMMUNICATION.MESSAGING.FIELDS.REFERENCE' | translate }}
            </th>
            <th>{{ 'COMMUNICATION.MESSAGING.FIELDS.SUBJECT' | translate }}</th>
            <th>{{ 'COMMUNICATION.MESSAGING.FIELDS.SENDER' | translate }}</th>
            <th>{{ 'COMMUNICATION.MESSAGING.FIELDS.STATUS' | translate }}</th>
            <th>{{ 'COMMUNICATION.MESSAGING.FIELDS.ACTIONS' | translate }}</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-message>
        <tr>
            <td>{{ formatDate(message.createdAt) }}</td>
            <td>{{ message.reference }}</td>
            <td>{{ message.subject }}</td>
            <td>{{ message.sender.name }}</td>
            <td>
                <p-tag [value]="message.status" [severity]="'info'"></p-tag>
            </td>
            <td>
                <button
                    pButton
                    icon="pi pi-eye"
                    class="p-button-text p-button-sm"
                    [pTooltip]="
                        'COMMUNICATION.MESSAGING.ACTIONS.VIEW' | translate
                    "
                    (click)="onViewClicked(message)"
                ></button>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="6" class="text-center p-4">
                {{ 'COMMUNICATION.MESSAGING.NO_DATA' | translate }}
            </td>
        </tr>
    </ng-template>
</p-table>
