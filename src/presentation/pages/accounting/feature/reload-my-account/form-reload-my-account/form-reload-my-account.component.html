<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <app-breadcrumb [title]="module | translate" [active_item]="subModule | translate"></app-breadcrumb>
            <div class="card">
                <div class="card-body">
                    <div *ngIf="!displayUrlErrorPage">
                        <div>
                            <div class="forms-feature-header">
                                <div>
                                    <h4>
                                        <b *ngIf="urlParamRef === 'reload-my-account'">
                                            <span>{{'FUND_MY_ACCOUNT' | translate}}</span>
                                        </b>
                                    </h4>
                                </div>
                                <div class="d-flex gap-3">
                                    <div>
                                        <p-button [label]="'SAVE' | translate" styleClass="p-button-success"
                                            [class.p-disabled]="formFundMyAccount.invalid"
                                            (click)="handleFundMyAccount()">
                                        </p-button>
                                    </div>
                                    <div>
                                        <p-button [label]="'CLOSE' | translate" (click)="closeInterface()"
                                            styleClass="p-button-danger">
                                        </p-button>
                                    </div>
                                </div>
                            </div>

                            <div style="margin-top: 3rem">
                                <div [formGroup]="formFundMyAccount">

                                    <fieldset>
                                        <legend><b>{{'MODE_OF_TRANSACTION' | translate}}</b></legend>
                                        <div class="row" style="
                                                padding-right: 0;
                                                padding-left: 3px;
                                                display: flex;
                                                gap: 4px;
                                                flex-wrap: nowrap;
                                            ">
                                            <div class="col-md-3 d-flex justify-content-around gap-2" style="
                                                    border: 1px solid #ced4da;
                                                    height: 3.6rem;
                                                    border-radius: 6px;
                                                ">
                                                <div class="d-flex align-items-center justify-content-around gap-2 
                                                        form-check form-check-inline p-0 m-0">
                                                    <input class="form-check-input" type="radio" name="transaction_mode"
                                                        value="depot" id="money_deposit" formControlName="mode_paiement"
                                                        #money_deposit style="width: 25px; height: 25px;" />
                                                    <label class="form-check-label fs-5" for="money_deposit"
                                                        style="width: inherit">
                                                        <strong>{{'MONEY_DEPOSIT' | translate}}</strong>
                                                    </label>
                                                </div>
                                                <div class="d-flex align-items-center justify-content-around gap-2 
                                                        form-check form-check-inline p-0 m-0">
                                                    <input class="form-check-input" type="radio" name="transaction_mode"
                                                        value="cheque" id="cheque" formControlName="mode_paiment" #cheque
                                                        style="width: 25px; height: 25px;" />
                                                    <label class="form-check-label fs-5" for="cheque">
                                                        <strong>{{'CHEQUE' | translate}}</strong>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="col-md-9" style="padding-right: 10px"
                                                *ngIf="money_deposit.checked">
                                                <input type="text" pInputText disabled
                                                    [value]="'THE_AMOUNT_OF_THE_DEPOSIT_WILL_BE_CARRIED_OVER_TO_YOUR_BALANCE' | translate" />
                                            </div>
                                            <div class="col-md-9" *ngIf="cheque.checked" style="padding-right: 10px; display: flex;
                                                flex-wrap: nowrap; gap: 4px;">
                                                <input type="text" pInputText disabled
                                                    [value]="
                                                        'THE_AMOUNT_OF_THE_CHEQUE_WILL_BE_CARRIED_OVER_TO_YOUR_BALANCE' | translate" />
                                            </div>
                                        </div>
                                        <ng-container *ngIf="money_deposit.checked; else chequeForm">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label><b>{{'BANK' | translate}}<span
                                                                    class="text-danger">*</span></b></label>
                                                        <p-dropdown formControlName="code_banque"
                                                            [options]="listBanks$ | async" [showClear]="true"
                                                            optionLabel="nom" optionValue="code" 
                                                            [filter]="true" filterBy="nom"
                                                            placeholder="{{ 'SELECT' | translate }} {{'BANK' | translate}}"
                                                            emptyFilterMessage="{{ 'NO_MATCH' | translate }}"
                                                            emptyMessage="{{ 'NO_DATA_FOUND' | translate }}">
                                                        </p-dropdown>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label><b>{{ 'NUMBER_CHEQUE' | translate }}</b></label>
                                                    <input formControlName="reference" type="text" pInputText
                                                        placeholder="{{ 'NUMBER_CHEQUE' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label><b>{{'NET_AMOUNT' | translate}} (Fcfa)</b></label>
                                                        <input formControlName="montant" type="number" pInputText
                                                            placeholder="{{ 'NET_AMOUNT' | translate }}"
                                                            [style]="{ minWidth: '100%' }" />
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label>
                                                            <b>{{'MAIL_OR_DOCUMENT' | translate}}<span
                                                                    class="text-danger">*</span></b>
                                                        </label>
                                                        <input type="file" style="padding: 0.6rem; border: 1px solid#000;
                                                                border-radius: 0.3rem; color: #000;"
                                                            (change)="onChangeFile($event.target.files)"
                                                            accept="image/png,image/jpeg" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label><b>{{ 'DATE' | translate }}</b></label>
                                                        <p-calendar formControlName="date_remise" [showIcon]="true"
                                                            [placeholder]="'JJ-MM-AAAA'" dateFormat="dd-mm-yy">
                                                        </p-calendar>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label><b>{{ 'ACCOUNT_HOLDER' | translate }}</b></label>
                                                    <input formControlName="titulaire" type="text" pInputText
                                                        placeholder="{{ 'ACCOUNT_HOLDER' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label><b>{{ 'NUMBER_ACCOUNT' | translate }}</b></label>
                                                    <input formControlName="numero" type="text" pInputText
                                                        placeholder="{{ 'NUMBER_ACCOUNT' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label><b>{{ 'PASSWORD' | translate }}</b></label>
                                                    <input formControlName="password" type="password" pInputText
                                                        placeholder="{{ 'PASSWORD' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                            </div>
                                        </ng-container>
                                        <ng-template #chequeForm>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label><b>{{ 'NUMBER_STATEMENT' | translate }}</b></label>
                                                    <input formControlName="reference" type="text" pInputText
                                                        placeholder="{{ 'NUMBER_STATEMENT' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label><b>{{'NET_AMOUNT' | translate}} (Fcfa)</b></label>
                                                        <input formControlName="montant" type="text" pInputText
                                                            placeholder="{{ 'NET_AMOUNT' | translate }}"
                                                            [style]="{ minWidth: '100%' }" />
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label>
                                                            <b>{{'MAIL_OR_DOCUMENT' | translate}}<span
                                                                    class="text-danger">*</span></b>
                                                        </label>
                                                        <input type="file" style="padding: 0.6rem; border: 1px solid#000;
                                                                border-radius: 0.3rem; color: #000;"
                                                            (change)="onChangeFile($event.target.files)"
                                                            accept="image/png,image/jpeg" />
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label><b>{{ 'NAME_OF_APPLICANT' | translate }}</b></label>
                                                    <input formControlName="titulaire" type="text" pInputText
                                                        placeholder="{{ 'NAME_OF_APPLICANT' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label><b>{{ 'PASSWORD' | translate }}</b></label>
                                                    <input formControlName="password" type="password" pInputText
                                                        placeholder="{{ 'PASSWORD' | translate }}"
                                                        [style]="{ minWidth: '100%' }" />
                                                </div>
                                            </div>
                                        </ng-template>
                                        
                                    </fieldset>
                                </div>
                                <div class="forms-feature-footer">
                                    <p-button [label]="'SAVE' | translate"
                                        [class.p-disabled]="formFundMyAccount.invalid" styleClass="p-button-success"
                                        (click)="handleFundMyAccount()">
                                    </p-button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="displayUrlErrorPage">
                        <div>
                            <div class="d-flex justify-content-end">
                                <p-button [label]="'CLOSE' | translate" styleClass="p-button-danger"
                                    (click)="onGoToBack()"></p-button>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center text-danger">
                            {{ 'NO_DATA_FOUND' | translate }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>