<p-table #dt [value]="listWhiteSimCard" [rowHover]="true" dataKey="id" selectionMode="single"
    [(selection)]="selectedWhiteSimCard" [rows]="pagination?.per_page" [globalFilterFields]="table.globalFilterFields">
    <ng-template pTemplate="caption">
        <div class="d-flex justify-content-between">
            <app-table-title [count]="pagination?.total" [legendePluriel]="'dossiers'" [perPage]="pagination?.per_page"
                [legendeSingulier]="'dossier'" [page]="pagination?.currentPage" [totalPage]="pagination?.last_page">
            </app-table-title>
            <div class="d-flex gap-2 align-items-center">
                <div>
                    <app-table-button-header (refresh)="pageCallback()"
                        [disabledButtonExport]="listWhiteSimCard.length === 0" (export)="onExportExcel()"
                        [hiddenButtonOther]="true" [iconOther]="'pi pi-plus'">
                    </app-table-button-header>
                </div>
                <div>
                    <app-search-table [dt]="dt"></app-search-table>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th *ngFor="let col of table.cols" [class]="col.class" [ngStyle]="{'width': col.width}">
                {{ col.header }}
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowIndex="rowIndex" let-dossier>
        <tr [pSelectableRow]="dossier">
            <td *ngFor="let col of table.cols" [class]="col.class" [ngStyle]="{'width': col.width}">
                <ng-container [ngSwitch]="col.header">
                    <ng-container *ngSwitchCase="'#'">
                        {{ rowIndex + pagination?.current_page }}
                    </ng-container>
                    <ng-container *ngSwitchCase="'Statut'">
                        <span [ngStyle]="{ 'font-size': '16px' }" [class]="'badge '+getStatutBadge(dossier.statut)">
                            {{ dossier?.[col.field] }}
                        </span>
                    </ng-container>
                    <ng-container *ngSwitchCase="'Actions'">
                        <button pButton icon="pi pi-eye" pTooltip="Voir" tooltipPosition="top"
                            (click)="onAction({'data': dossier, 'action': 'dÃ©tails', 'view': 'page'})"
                            class="p-button-dark">
                        </button>&nbsp;
                        <button pButton icon="pi pi-book" pTooltip="Journal" tooltipPosition="top"
                            (click)="onAction({'data': dossier, 'action': 'journal', 'view': 'modal'})"
                            class="p-button-primary">
                        </button>
                    </ng-container>
                    <ng-container *ngSwitchDefault>
                        {{dossier?.[col.field]}}
                    </ng-container>
                </ng-container>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr *ngIf="listWhiteSimCard?.length <= 0 && !spinner">
            <td class="posRelative" colspan="15">
                <span class="posCenter"> {{ 'NO_DATA_FOUND' | translate }} </span>
            </td>
        </tr>
        <tr *ngIf="spinner" style="height:46px">
            <td class="posRelative" colspan="15">
                <p-progressSpinner class="posCenter" [style]="{ width: '40px', height: '50px' }"
                    styleClass="custom-spinner" strokeWidth="8" fill="#EEEEEE" animationDuration=".5s">
                </p-progressSpinner>
            </td>
        </tr>
    </ng-template>
</p-table>