<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Modifier SIM</h2>
                <div>
                    <p-button [label]="currentObject === undefined ? 'Enregistrer' : 'Modifier'"
                        [disabled]="!adminForm.valid" styleClass="p-button-success mr-2"
                        (click)="handleUpdateCampagne()"></p-button>&nbsp;

                    <p-button label="Fermer" styleClass="p-button-danger" (click)="close()"></p-button>
                </div>
            </div>

            <hr *ngIf="!currentData?.show" />

            <div *ngIf="!currentData?.show">
                <p-tabView (onChange)="handleChangeTabviewIndex($event)" styleClass="w-100">
                    <p-tabPanel header="IDENTIFICATION">
                        <div *ngIf="currentTabsIndex === 0">
                            <form [formGroup]="adminForm" novalidate>
                                <fieldset>
                                    <legend>Informations SIM</legend>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>IMSI</b></label>
                                                <input type="text" formControlName="imsi" pInputText class="w-100" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>MSISDN</b></label>
                                                <input type="text" formControlName="msisdn" pInputText class="w-100" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>Formule</b></label>
                                                <input type="text" formControlName="formule" pInputText class="w-100" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>Statut Contrat</b></label>
                                                <app-statut-contrat
                                                    [statut]="currentObject?.statut"></app-statut-contrat>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>Informations d'identification</legend>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>{{ firstLevelLibelle
                                                        }}<span class="text-danger">*</span></b>
                                                </label>
                                                <p-dropdown [options]="listDirectionRegionales"
                                                    formControlName="niveau_un_uuid" optionLabel="nom"
                                                    optionValue="uuid" [placeholder]="firstLevelLibelle">
                                                    <ng-template let-data pTemplate="item">
                                                        <div class="country-item">
                                                            <div>
                                                                {{ data.nom }}
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </p-dropdown>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>{{ secondLevelLibelle
                                                        }}<span class="text-danger">*</span></b>
                                                </label>
                                                <p-dropdown [options]="listExploitations"
                                                    formControlName="niveau_deux_uuid" optionLabel="nom"
                                                    optionValue="uuid" [placeholder]="secondLevelLibelle">
                                                    <ng-template let-data pTemplate="item">
                                                        <div class="country-item">
                                                            <div>
                                                                {{ data.nom }}
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </p-dropdown>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>{{ thirdLevelLibelle
                                                        }}<span class="text-danger">*</span></b>
                                                </label>
                                                <p-dropdown [options]="listActivites"
                                                    formControlName="niveau_trois_uuid" optionLabel="nom"
                                                    optionValue="uuid" [placeholder]="thirdLevelLibelle">
                                                    <ng-template let-data pTemplate="item">
                                                        <div class="country-item">
                                                            <div>
                                                                {{ data.nom }}
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </p-dropdown>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>Nom Emplacement</b>
                                                </label>
                                                <input type="text" formControlName="point_emplacement" pInputText />
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>Usage<span class="text-danger">*</span></b>
                                                </label>
                                                <p-dropdown [options]="listUsage" formControlName="usage"
                                                    optionLabel="nom_usage" optionValue="id">
                                                    <ng-template let-data pTemplate="item">
                                                        <div class="country-item">
                                                            <div>
                                                                {{ data.nom_usage }}
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </p-dropdown>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>Adresse mail Notification</b>
                                                </label>
                                                <input type="text" formControlName="adresse_email" pInputText />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>Adresse géographique<span class="text-danger">*</span></b>
                                                </label>
                                                <input type="text" formControlName="adresse_geographique" pInputText />
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>Latitude</b>
                                                </label>
                                                <input type="text" formControlName="latitude" pInputText />
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>
                                                    <b>Longitude</b>
                                                </label>
                                                <input type="text" formControlName="longitude" pInputText />
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>Informations Réseau</legend>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>Date Trafic</b></label>
                                                <input type="text" formControlName="date_id_reseau" pInputText
                                                    class="w-100" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>APN</b></label>
                                                <input type="text" formControlName="apnni_reseau" pInputText
                                                    class="w-100" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>Adresse IP</b></label>
                                                <input type="text" formControlName="adresse_ip" pInputText
                                                    class="w-100" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label><b>Site Trafic</b></label>
                                                <input type="text" formControlName="site_reseau" pInputText
                                                    class="w-100" />
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="PHOTOS">
                        <div *ngIf="currentTabsIndex === 1">
                            <fieldset>
                                <legend>Photos</legend>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <p-fileUpload mode="basic"
                                                [chooseLabel]="imageURLs['recto'] ? 'Modifier photo recto' : 'Choisir photo recto'"
                                                [chooseIcon]="imageURLs['recto'] ? 'pi pi-pencil' : 'pi pi-plus'"
                                                accept="image/*" [auto]="true" (onSelect)="onUpload($event, 'recto')"
                                                styleClass="w-100 mb-2 custom-file-upload"></p-fileUpload>
                                            <div *ngIf="getImageSrc('recto')" class="mt-2">
                                                <img [src]="getImageSrc('recto')" alt="Photo recto" class="img-fluid">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <p-fileUpload mode="basic" chooseLabel="Choisir photo verso"
                                                accept="image/*" [auto]="true"
                                                [chooseLabel]="imageURLs['verso'] ? 'Modifier photo verso' : 'Choisir photo verso'"
                                                [chooseIcon]="imageURLs['verso'] ? 'pi pi-pencil' : 'pi pi-plus'"
                                                (onSelect)="onUpload($event, 'verso')"
                                                styleClass="w-100 mb-2 custom-file-upload"></p-fileUpload>
                                            <div *ngIf="getImageSrc('verso')" class="mt-2">
                                                <img [src]="getImageSrc('verso')" alt="Photo verso"
                                                    class="img-fluid">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <p-fileUpload mode="basic" chooseLabel="Choisir photo supplémentaire"
                                                accept="image/*"
                                                [chooseLabel]="imageURLs['physique'] ? 'Modifier photo physique' : 'Choisir photo physique'"
                                                [chooseIcon]="imageURLs['physique'] ? 'pi pi-pencil' : 'pi pi-plus'"
                                                [auto]="true" (onSelect)="onUpload($event, 'physique')"
                                                styleClass="w-100 mb-2 custom-file-upload"></p-fileUpload>
                                            <div *ngIf="getImageSrc('physique')" class="mt-2">
                                                <img [src]="getImageSrc('physique')" alt="Photo supplémentaire"
                                                    class="img-fluid">
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </fieldset>
                        </div>
                    </p-tabPanel>
                </p-tabView>
            </div>

            <div *ngIf="currentData?.show">
                <p-tabView (onChange)="handleChangeTabviewIndex($event)" styleClass="w-100">
                    <p-tabPanel header="IDENTIFICATION">
                        <!-- Contenu pour l'affichage des données... -->
                    </p-tabPanel>
                    <p-tabPanel header="HISTORIQUE">
                        <app-historique *ngIf="currentTabsIndex === 1" [modele]="'sims'"
                            [modele_id]="currentData.id"></app-historique>
                    </p-tabPanel>
                </p-tabView>
            </div>
        </div>
    </div>
</div>