<div class="auth-container">
    <div class="logo-container">
        <a class="auth-logo" routerLink="/">
            <img [src]="AUTH_LOGO" alt="Ansut Logo" />
        </a>
    </div>

    <div class="unified-auth-card">
        <div class="card-content">
            <div class="card-left-section" *ngIf="!isEmailSent">
                <div class="title-content">
                    <div class="title-frame">
                        <h1 class="app-title">
                            {{
                                'PASSWORD_RESET.UI.FORGOT_PASSWORD_TITLE'
                                    | translate
                            }}
                        </h1>
                        <p class="app-subtitle">
                            {{
                                'PASSWORD_RESET.UI.FORGOT_PASSWORD_SUBTITLE'
                                    | translate
                            }}
                        </p>
                    </div>
                </div>
            </div>

            <div class="card-right-section">
                <div class="form-container" *ngIf="!isEmailSent">
                    <form
                        [formGroup]="forgotPasswordForm"
                        (ngSubmit)="onSubmit()"
                        class="auth-form"
                    >
                        <div class="form-group">
                            <label class="form-label">
                                <b>
                                    {{
                                        'PASSWORD_RESET.FORM.EMAIL.LABEL'
                                            | translate
                                    }}
                                    <span class="text-danger">*</span>
                                </b>
                            </label>
                            <input
                                type="email"
                                formControlName="email"
                                class="form-control"
                                [class.is-invalid]="isFieldInvalid('email')"
                                [placeholder]="
                                    'PASSWORD_RESET.FORM.EMAIL.PLACEHOLDER'
                                        | translate
                                "
                            />
                            <ng-container
                                *ngIf="
                                    isFieldInvalid('email') &&
                                    getFieldError('email')
                                "
                            >
                                <small class="text-danger">
                                    {{ getFieldError('email') | translate }}
                                </small>
                            </ng-container>
                        </div>

                        <div class="form-actions">
                            <button
                                type="submit"
                                class="btn btn-primary w-100"
                                [disabled]="
                                    forgotPasswordForm.invalid ||
                                    (isForgotPasswordLoading$ | async)
                                "
                            >
                                <span
                                    *ngIf="!(isForgotPasswordLoading$ | async)"
                                >
                                    {{
                                        'PASSWORD_RESET.BUTTONS.RESET'
                                            | translate
                                    }}
                                </span>
                                <span *ngIf="isForgotPasswordLoading$ | async">
                                    {{
                                        'PASSWORD_RESET.BUTTONS.LOADING'
                                            | translate
                                    }}
                                </span>
                            </button>
                            <button
                                type="button"
                                class="btn btn-secondary w-100 mt-3"
                                (click)="onCancel()"
                            >
                                {{
                                    'PASSWORD_RESET.BUTTONS.BACK_TO_LOGIN' | translate
                                }}
                            </button>
                        </div>
                    </form>
                </div>

                <div class="success-container" *ngIf="isEmailSent">
                    <div class="success-icon">
                        <img
                            src="assets/images/email.png"
                            alt="Email sent"
                            width="70"
                        />
                    </div>
                    <div class="success-message">
                        <p>
                            {{
                                'PASSWORD_RESET.MESSAGES.SUCCESS.EMAIL_SENT_MESSAGE'
                                    | translate
                            }}
                        </p>
                    </div>
                    <div class="success-actions">
                        <button
                            type="button"
                            class="btn btn-secondary w-100"
                            (click)="onCancel()"
                        >
                            {{
                                'PASSWORD_RESET.BUTTONS.BACK_TO_LOGIN'
                                    | translate
                            }}
                        </button>
                        <div class="resend-link mt-3">
                            <span>
                                {{
                                    'PASSWORD_RESET.MESSAGES.NOT_RECEIVED'
                                        | translate
                                }}
                            </span>
                            <a
                                (click)="onResendEmail()"
                                [style.cursor]="'pointer'"
                                [style.color]="config.colors.primary"
                            >
                                {{
                                    'PASSWORD_RESET.BUTTONS.RESEND' | translate
                                }}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
