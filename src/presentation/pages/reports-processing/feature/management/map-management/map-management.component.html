<!-- map-management.component.html -->
<div class="map-management">
    <!-- Overlay de chargement -->
    <div class="map-overlay" *ngIf="isLoading()">
        <div class="loading-container">
            <div class="spinner"></div>
            <p>Chargement de la carte...</p>
        </div>
    </div>

    <!-- Conteneur de la carte -->
    <div
        class="map-container"
        [class.map-container--ready]="isMapInitialized()"
        tabindex="0"
    ></div>

    <!-- Popup -->
    <div class="map-popup" *ngIf="enablePopup" [class.show]="showPopup()">
        <div class="popup-content">
            <div class="popup-header">
                <h3>{{ selectedMarker()?.title || 'Position' }}</h3>
                <button class="popup-close" (click)="togglePopup(false)">
                    Ã—
                </button>
            </div>
            <div class="popup-body">
                <p>
                    <strong>Latitude:</strong> {{ latitude | number: '1.6-6' }}
                </p>
                <p>
                    <strong>Longitude:</strong>
                    {{ longitude | number: '1.6-6' }}
                </p>
                <p *ngIf="selectedMarker()?.description" class="description">
                    {{ selectedMarker()?.description }}
                </p>
            </div>
            <div class="popup-actions">
                <button class="btn-copy" (click)="copyCoordinates()">
                    ğŸ“‹ Copier
                </button>
                <button class="btn-recenter" (click)="recenterMap()">
                    ğŸ¯ Recentrer
                </button>
            </div>
        </div>
    </div>

    <!-- ContrÃ´les -->
    <div class="map-controls" *ngIf="isMapInitialized()">
        <button class="control-btn" (click)="recenterMap()" title="Recenter">
            ğŸ¯
        </button>
    </div>

    <!-- Badge coordonnÃ©es -->
    <div class="coordinates-badge" *ngIf="isMapInitialized()">
        <div class="badge-content">
            ğŸ“ {{ latitude | number: '1.6-6' }},
            {{ longitude | number: '1.6-6' }}
        </div>
    </div>
</div>
